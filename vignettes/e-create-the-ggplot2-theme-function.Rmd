---
title: "e - Create the {ggplot2} theme function"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{e - Create the {ggplot2} theme function}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(architekter)
```

<!-- WARNING - This vignette is generated by {fusen} from /dev/flat_ggplot_theme.Rmd: do not edit by hand -->

# Create a theme function in correspondance with the Figma maquette

```{r out.width = '100%', dpi = 800}
library(ggplot2)

my_awesome_theme <- get_figma_file_content(
  file_key = "wRqIvMmymzSPuj0sEhnORb",
  acess_token = Sys.getenv("FIGMA_TOKEN")
  ) %>%
  create_theme_fun()

# Toy plot 1
ggplot(data = iris) + 
  aes(x = Sepal.Width, fill = Species) + 
  geom_density() + 
  labs(title = "Sepal width of several species of iris",
       subtitle = "This plot respects the graphic design system defined in Figma",
       x = "Sepal width",
       y = "Density", 
       color = "Iris species") +
  my_awesome_theme()

# Toy plot 2
ggplot(data = iris) + 
  aes(x = Sepal.Width, fill = Species) + 
  geom_density() + 
  labs(title = "Sepal width of several species of iris",
       subtitle = "This plot respects the graphic design system defined in Figma",
       x = "Sepal width",
       y = "Density", 
       color = "Iris species") +
  my_awesome_theme(legend.position = "bottom")

# Toy plot 3
ggplot(data = iris) + 
  aes(x = Sepal.Length, y = Sepal.Width, color = Species) + 
  geom_point() + 
  labs(title = "Relationship between sepal length and sepal width of several species of iris",
       subtitle = "This plot respects the graphic design system defined in Figma",
       x = "Sepal length",
       y = "Sepal width", 
       color = "Iris species") +
  my_awesome_theme()

# Toy plot 4
ggplot(data = iris) + 
  aes(x = Sepal.Length, y = Sepal.Width) + 
  geom_point() + 
  labs(title = "Relationship between sepal length and sepal width of several species of iris",
       subtitle = "This plot respects the graphic design system defined in Figma",
       x = "Sepal length",
       y = "Sepal width") +
  facet_grid(cols = vars(Species)) +
  my_awesome_theme()
```

### In case your theme uses specific fonts

The `create_theme_fun()` function will warn you if the fonts needed for theme are not installed on your system.

You will be able to install them manually on your system. Or you can use the `{showtext}` package: https://github.com/yixuan/showtext.


```{r eval = FALSE}
library(showtext)

# Install a Google font cf https://fonts.google.com/
font_add_google(name = "Roboto", family = "Roboto")

# Install a font from a file
font_add(family = "Roboto", system.file("fonts", "Roboto.ttf", package = "architekter"))
font_add(family = "Roboto Light", system.file("fonts", "RobotoLight.ttf", package = "architekter"))

# Use showtext to render text
showtext_auto()
```

# Details of the functions

## Determine if the required font families are present on the system

  

```{r example-check_font_families}
data(toy_raw_file_content)

toy_raw_file_content %>% 
  extract_ggplot_theme() %>% 
  check_font_families()
```

  

  


## Create a theme function by using the {ggplot2} elements extracted from the Figma file

```{r examples-create_theme_fun}
data(toy_raw_file_content)

library(ggplot2)

my_theme <- toy_raw_file_content %>% 
  create_theme_fun()

#' \dontrun{
ggplot(data = iris) + 
  aes(x = Sepal.Width, fill = Species) + 
  geom_density() + 
  labs(title = "Sepal width of several species of iris",
       subtitle = "This plot respects the graphic design system defined in Figma",
       x = "Sepal width",
       y = "Density", 
       color = "Species") +
  my_theme()
#' }
```

